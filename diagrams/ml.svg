<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: ml Pages: 1 -->
<svg width="2210pt" height="617pt"
 viewBox="0.00 0.00 2209.76 617.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 613)">
<title>ml</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-613 2205.7598,-613 2205.7598,4 -4,4"/>
<!-- ndMessage -->
<g id="node1" class="node">
<title>ndMessage</title>
<polygon fill="none" stroke="#000000" points="0,-469.5 0,-569.5 135.6836,-569.5 135.6836,-469.5 0,-469.5"/>
<text text-anchor="middle" x="67.8418" y="-554.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Enumeration&gt;&gt;&gt;</text>
<text text-anchor="middle" x="67.8418" y="-540.3" font-family="Times,serif" font-size="14.00" fill="#000000">Message</text>
<polyline fill="none" stroke="#000000" points="0,-533.5 135.6836,-533.5 "/>
<text text-anchor="middle" x="67.8418" y="-518.3" font-family="Times,serif" font-size="14.00" fill="#000000">Selected</text>
<text text-anchor="middle" x="67.8418" y="-504.3" font-family="Times,serif" font-size="14.00" fill="#000000">ShardId</text>
<text text-anchor="middle" x="67.8418" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#000000">Collation</text>
<text text-anchor="middle" x="67.8418" y="-476.3" font-family="Times,serif" font-size="14.00" fill="#000000">Proposal</text>
</g>
<!-- ndNotary -->
<g id="node2" class="node">
<title>ndNotary</title>
<polygon fill="none" stroke="#000000" points="245.5767,-.5 245.5767,-234.5 1002.1069,-234.5 1002.1069,-.5 245.5767,-.5"/>
<text text-anchor="middle" x="623.8418" y="-219.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="623.8418" y="-205.3" font-family="Times,serif" font-size="14.00" fill="#000000">Notary</text>
<polyline fill="none" stroke="#000000" points="245.5767,-198.5 1002.1069,-198.5 "/>
<text text-anchor="middle" x="623.8418" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; id: ethereum_types::U256</text>
<text text-anchor="middle" x="623.8418" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; selected: bool</text>
<text text-anchor="middle" x="623.8418" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; shard_id: ethereum_types::U256</text>
<text text-anchor="middle" x="623.8418" y="-141.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; collation_vectors: HashMap&lt;ethereum_types::U256, Vec&lt;collation::Collation&gt;&gt;</text>
<text text-anchor="middle" x="623.8418" y="-127.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; proposal_vectors: HashMap&lt;ethereum_types::U256, Vec&lt;collation::Collation&gt;&gt;</text>
<text text-anchor="middle" x="623.8418" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; smc_listener: mpsc::Receiver&lt;message::Message&gt;</text>
<text text-anchor="middle" x="623.8418" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; manager_listener: mpsc::Receiver&lt;client_thread::Command&gt;</text>
<polyline fill="none" stroke="#000000" points="245.5767,-92.5 1002.1069,-92.5 "/>
<text text-anchor="middle" x="623.8418" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(smc_listener: mpsc::Receiver&lt;message::Message&gt;, manager_listener: mpsc::Receiver&lt;client_thread::Command&gt;) &#45;&gt; Notary</text>
<text text-anchor="middle" x="623.8418" y="-63.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;mut self)</text>
<text text-anchor="middle" x="623.8418" y="-49.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; store_collation(&amp;mut self, collation: collation::Collation)</text>
<text text-anchor="middle" x="623.8418" y="-35.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; store_proposal(&amp;mut self, proposal: collation::Collation)</text>
<text text-anchor="middle" x="623.8418" y="-21.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; get_availability(&amp;mut self)</text>
<text text-anchor="middle" x="623.8418" y="-7.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; submit_vote(&amp;self)</text>
</g>
<!-- ndSMCListener -->
<g id="node3" class="node">
<title>ndSMCListener</title>
<polygon fill="none" stroke="#000000" points="1112.0381,-451.5 1112.0381,-587.5 1685.6455,-587.5 1685.6455,-451.5 1112.0381,-451.5"/>
<text text-anchor="middle" x="1398.8418" y="-572.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1398.8418" y="-558.3" font-family="Times,serif" font-size="14.00" fill="#000000">SMCListener</text>
<polyline fill="none" stroke="#000000" points="1112.0381,-551.5 1685.6455,-551.5 "/>
<text text-anchor="middle" x="1398.8418" y="-536.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; period: ethereum_types::U256</text>
<text text-anchor="middle" x="1398.8418" y="-522.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; notary_sender: mpsc::Sender&lt;message::Message&gt;</text>
<polyline fill="none" stroke="#000000" points="1112.0381,-515.5 1685.6455,-515.5 "/>
<text text-anchor="middle" x="1398.8418" y="-500.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(notary_sender: mpsc::Sender&lt;message::Message&gt;) &#45;&gt; SMCListener</text>
<text text-anchor="middle" x="1398.8418" y="-486.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register_notary_address(&amp;self, notary_addr: ethereum_types::Address) &#45;&gt; bool</text>
<text text-anchor="middle" x="1398.8418" y="-472.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; get_selected_notaries(&amp;self, shard_id: ethereum_types::U256) &#45;&gt; Vec&lt;ethereum_types::Address&gt;</text>
<text text-anchor="middle" x="1398.8418" y="-458.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register_proposer_address(&amp;self, proposer_addr: ethereum_types::Address) &#45;&gt; bool</text>
</g>
<!-- ndCollation -->
<g id="node4" class="node">
<title>ndCollation</title>
<polygon fill="none" stroke="#000000" points="438.9141,-285.5 438.9141,-379.5 808.7695,-379.5 808.7695,-285.5 438.9141,-285.5"/>
<text text-anchor="middle" x="623.8418" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="623.8418" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#000000">Collation</text>
<polyline fill="none" stroke="#000000" points="438.9141,-343.5 808.7695,-343.5 "/>
<text text-anchor="middle" x="623.8418" y="-328.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; header: header::Header</text>
<text text-anchor="middle" x="623.8418" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; body: body::Body</text>
<polyline fill="none" stroke="#000000" points="438.9141,-307.5 808.7695,-307.5 "/>
<text text-anchor="middle" x="623.8418" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(header: header::Header, body: body::Body) &#45;&gt; Collation</text>
</g>
<!-- ndCollation&#45;&gt;ndNotary -->
<g id="edge1" class="edge">
<title>ndCollation&#45;&gt;ndNotary</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M623.8418,-285.3173C623.8418,-272.964 623.8418,-259.0394 623.8418,-244.6276"/>
<polygon fill="#000000" stroke="#000000" points="623.8418,-234.5858 628.3419,-244.5857 623.8418,-239.5858 623.8419,-244.5858 623.8419,-244.5858 623.8419,-244.5858 623.8418,-239.5858 619.3419,-244.5858 623.8418,-234.5858 623.8418,-234.5858"/>
</g>
<!-- ndHeader -->
<g id="node5" class="node">
<title>ndHeader</title>
<polygon fill="none" stroke="#000000" points="153.2607,-451.5 153.2607,-587.5 1094.4229,-587.5 1094.4229,-451.5 153.2607,-451.5"/>
<text text-anchor="middle" x="623.8418" y="-572.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="623.8418" y="-558.3" font-family="Times,serif" font-size="14.00" fill="#000000">Header</text>
<polyline fill="none" stroke="#000000" points="153.2607,-551.5 1094.4229,-551.5 "/>
<text text-anchor="middle" x="623.8418" y="-536.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; shard_id: ethereum_types::U256</text>
<text text-anchor="middle" x="623.8418" y="-522.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; proposer_address: ethereum_types::Address</text>
<text text-anchor="middle" x="623.8418" y="-508.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; chunk_root: ethereum_types::H256</text>
<text text-anchor="middle" x="623.8418" y="-494.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; period: ethereum_types::U256</text>
<polyline fill="none" stroke="#000000" points="153.2607,-487.5 1094.4229,-487.5 "/>
<text text-anchor="middle" x="623.8418" y="-472.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(shard_id: ethereum_types::U256, chunk_root: ethereum_types::H256, period: ethereum_types::U256, proposer_address: ethereum_types::Address) &#45;&gt; Header</text>
<text text-anchor="middle" x="623.8418" y="-458.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ hash(&amp;self) &#45;&gt; ethereum_types::H256</text>
</g>
<!-- ndHeader&#45;&gt;ndCollation -->
<g id="edge2" class="edge">
<title>ndHeader&#45;&gt;ndCollation</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M623.8418,-451.4597C623.8418,-431.2771 623.8418,-409.3812 623.8418,-389.9412"/>
<polygon fill="#000000" stroke="#000000" points="623.8418,-379.722 628.3419,-389.7219 623.8418,-384.722 623.8419,-389.722 623.8419,-389.722 623.8419,-389.722 623.8418,-384.722 619.3419,-389.722 623.8418,-379.722 623.8418,-379.722"/>
</g>
<!-- ndProposer -->
<g id="node6" class="node">
<title>ndProposer</title>
<polygon fill="none" stroke="#000000" points="1703.2329,-430.5 1703.2329,-608.5 1912.4507,-608.5 1912.4507,-430.5 1703.2329,-430.5"/>
<text text-anchor="middle" x="1807.8418" y="-593.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1807.8418" y="-579.3" font-family="Times,serif" font-size="14.00" fill="#000000">Proposer</text>
<polyline fill="none" stroke="#000000" points="1703.2329,-572.5 1912.4507,-572.5 "/>
<text text-anchor="middle" x="1807.8418" y="-557.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; id: ethereum_types::U256</text>
<polyline fill="none" stroke="#000000" points="1703.2329,-550.5 1912.4507,-550.5 "/>
<text text-anchor="middle" x="1807.8418" y="-535.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new() &#45;&gt; Proposer</text>
<text text-anchor="middle" x="1807.8418" y="-521.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; register(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; add_balance(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-479.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; collect_blobs(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-465.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; prepare_collation(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-451.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; reveal_proposal(&amp;self)</text>
<text text-anchor="middle" x="1807.8418" y="-437.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; broadcast_collation_body(&amp;self)</text>
</g>
<!-- ndCommand -->
<g id="node7" class="node">
<title>ndCommand</title>
<polygon fill="none" stroke="#000000" points="1930,-490.5 1930,-548.5 2065.6836,-548.5 2065.6836,-490.5 1930,-490.5"/>
<text text-anchor="middle" x="1997.8418" y="-533.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Enumeration&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1997.8418" y="-519.3" font-family="Times,serif" font-size="14.00" fill="#000000">Command</text>
<polyline fill="none" stroke="#000000" points="1930,-512.5 2065.6836,-512.5 "/>
<text text-anchor="middle" x="1997.8418" y="-497.3" font-family="Times,serif" font-size="14.00" fill="#000000">Terminate</text>
</g>
<!-- ndClientThread -->
<g id="node8" class="node">
<title>ndClientThread</title>
<polygon fill="none" stroke="#000000" points="1793.9238,-271.5 1793.9238,-393.5 2201.7598,-393.5 2201.7598,-271.5 1793.9238,-271.5"/>
<text text-anchor="middle" x="1997.8418" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;&lt;Structure&gt;&gt;&gt;</text>
<text text-anchor="middle" x="1997.8418" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#000000">ClientThread</text>
<polyline fill="none" stroke="#000000" points="1793.9238,-357.5 2201.7598,-357.5 "/>
<text text-anchor="middle" x="1997.8418" y="-342.3" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; mode: config::Mode</text>
<text text-anchor="middle" x="1997.8418" y="-328.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ manager: Option&lt;mpsc::Sender&lt;Command&gt;&gt;</text>
<text text-anchor="middle" x="1997.8418" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ handle: Option&lt;thread::JoinHandle&lt;()&gt;&gt;</text>
<polyline fill="none" stroke="#000000" points="1793.9238,-307.5 2201.7598,-307.5 "/>
<text text-anchor="middle" x="1997.8418" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ new(mode: &amp;config::Mode) &#45;&gt; ClientThread</text>
<text text-anchor="middle" x="1997.8418" y="-278.3" font-family="Times,serif" font-size="14.00" fill="#000000">+ run(&amp;mut self, smc_receiver: mpsc::Receiver&lt;message::Message&gt;)</text>
</g>
<!-- ndCommand&#45;&gt;ndClientThread -->
<g id="edge3" class="edge">
<title>ndCommand&#45;&gt;ndClientThread</title>
<path fill="none" stroke="#000000" d="M1997.8418,-490.2813C1997.8418,-467.6202 1997.8418,-435.1951 1997.8418,-405.6271"/>
<polygon fill="#000000" stroke="#000000" points="1997.8419,-405.6014 1993.8418,-399.6014 1997.8418,-393.6014 2001.8418,-399.6014 1997.8419,-405.6014"/>
</g>
</g>
</svg>
